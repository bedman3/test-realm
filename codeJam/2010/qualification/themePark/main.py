

test_case_queue = [
	[1, 4, 2, 1],
	[1],
	[2, 4, 2, 3, 4, 2, 1, 2, 1, 3],
	[155543, 2678717, 8503876, 2795471, 7098451, 7163069, 1105654, 277038, 9735149, 1132266, 1876257, 4384246, 4280049, 8333400, 7001005, 9628289, 7736859, 8142387, 4842065, 7598914, 1942085, 2010706, 1633067, 1579492, 9702242, 3548602, 4682987, 9770647, 371310, 7963012, 7201109, 8726332, 9835189, 2677916, 6209449, 4516742, 2312113, 7347711, 2082808, 4194646, 2899586, 8169160, 615182, 1478233, 2477960, 6674285, 2240770, 6681950, 3705078, 9730, 8350580, 3237330, 9545743, 700700, 1508975, 6823770, 7884706, 8273325, 4588988, 1223928, 709144, 2051897, 1724471, 6236219, 6817105, 8385504, 7556062, 4600959, 4884061, 2435670, 3449369, 9594830, 6427327, 2161690, 7014215, 8258291, 2467289, 5232772, 9391834, 7457189, 4672731, 1964048, 7454075, 1590861, 2037378, 9895374, 7835837, 9633160, 3971986, 1816809, 8722230, 7555710, 2144162, 9455568, 3587316, 6518201, 8387969, 6681114, 7237909, 2935868, 34077, 5097480, 197115, 2196503, 6798820, 614807, 7468886, 5960226, 8765033, 8987309, 2342108, 4496791, 4260718, 1109683, 7152457, 932166, 1053047, 7215213, 6481246, 7241980, 1662981, 7334920, 4933271, 6099000, 5158566, 7108519, 845593, 4053702, 129928, 953289, 32389, 4037094, 6403391, 959740, 9643732, 7342144, 263999, 4689076, 4862778, 5199995, 618398, 5260465, 625910, 4818149, 6002268, 8364336, 7358516, 4156817, 2316387, 3090386, 3463878, 5524809, 5726174, 8689226, 175608, 5626844, 7040139, 4444822, 3477150, 4200674, 7621101, 144174, 5260924, 5134752, 7196132, 6571072, 6766484, 4556453, 4572572, 7514039, 4117944, 9376956, 8063723, 8852257, 4373384, 5024863, 2691721, 3258861, 8065277, 6913504, 3567375, 6449019, 8451362, 711030, 8658446, 1328298, 2732983, 1701142, 5422296, 4666905, 1595802, 7118025, 3960484, 988639, 6927065, 9463212, 3759776, 9474760, 5230059, 6069146, 3532378, 8632112, 5593447, 7631, 9133825, 2975416, 8965931, 3484466, 1339395, 3039978, 7519256, 8068006, 748177, 9379088, 277483, 4246555, 1963392, 6574985, 6858895, 6718853, 5891623, 1833816, 5757786, 6373247, 2695593, 3585978, 5652393, 6710072, 1326777, 779554, 4037591, 2296199, 6294836, 7279930, 8542040, 3544907, 3304897, 1390165, 7889285, 2777424, 6979452, 8818790, 6874331, 3201721, 4848180, 9781079, 4301598, 2841532, 9923772, 2206433, 9445606, 3013939, 7026094, 5984202, 6044009, 8335383, 4165149, 4665497, 5870500, 5723931, 4905558, 6512434, 135524, 8310331, 7548389, 396690, 7866222, 9900556, 2566682, 4169248, 2990456, 2484817, 7325149, 5898801, 8851740, 833858, 9506599, 7169709, 5962697, 9119361, 9801380, 4891017, 2721328, 505885, 6091817, 1672425, 6320414, 6872198, 6495603, 5002657, 8734961, 5169869, 8187557, 7337284, 9800258, 9844318, 4075105, 6634609, 8012381, 6530690, 4354382, 8182594, 9487412, 4225168, 9144191, 7694811, 5901290, 2102551, 9328809, 8473890, 9395279, 9214277, 8979289, 32895, 5146652, 6925912, 8534956, 8216002, 5311971, 7323492, 8432551, 1110729, 8546308, 1201607, 6184713, 9598005, 1156563, 9134600, 1653454, 8091707, 8065054, 2602854, 8123655, 6498260, 9185390, 5300789, 1043622, 2138689, 9274732, 9438767, 134614, 935688, 9136969, 646115, 9028795, 9657328, 6397561, 3067877, 3018458, 5616605, 5971133, 152588, 9217299, 3359638, 8368483, 1206041, 8641699, 8463361, 8206126, 6498953, 3328083, 5372080, 676518, 7693727, 8958767, 8821439, 1011109, 4911365, 4135278, 6883919, 9645038, 8557471, 5441174, 9055418, 6531463, 5000851, 6593312, 9117863, 5571626, 9860743, 9105402, 7879806, 4995912, 2349906, 4477774, 2469327, 5337293, 6933196, 4992489, 8054890, 1585786, 3518520, 4985362, 729413, 1760565, 3947071, 5625815, 3942761, 6070879, 5065112, 5851201, 3203183, 3495589, 8312308, 9172281, 5102641, 8373708, 1396708, 8843959, 5522722, 7710101, 9824155, 9993469, 9929092, 1328254, 3800648, 8890765, 8469235, 4777369, 3931197, 5485900, 8051416, 3671058, 3839291, 5598827, 7466940, 2560007, 5497586, 9181174, 4164043, 5974701, 8671087, 4246762, 171047, 2639764, 3441328, 5658314, 6700137, 231172, 3782873, 1671459, 8763292, 2718373, 2288698, 6468252, 6304388, 9518393, 1784199, 4422119, 5679874, 7371957, 6550484, 7503608, 4063329, 9643476, 970977, 3198658, 2286078, 8828340, 5723330, 5672120, 6529696, 2615366, 4042359, 1768749, 4026616, 6173362, 15188, 313889, 7143726, 2101401, 6146346, 3079087, 1539453, 4569387, 6822240, 8074120, 1947538, 3935114, 1478782, 8452008, 7846037, 5764072, 5172446, 7294996, 5411583, 9670857, 659024, 2949198, 2914501, 8739451, 1220968, 8366882, 6758436, 2048970, 2035613, 434609, 7269004, 1582676, 3503146, 1935796, 4862307, 8608204, 9551468, 2948755, 4440821, 7427192, 1229160, 4327046, 9662642, 2296045, 9109398, 8845253, 7087453, 982774, 8024118, 3060233, 8922577, 3204614, 7341948, 1385060, 1914046, 5407139, 1363797, 4868391, 466591, 1700135, 8272006, 7410345, 6439407, 8989730, 9206760, 58687, 9193862, 7559701, 9803736, 370318, 3578735, 9231705, 2346681, 7422962, 5075244, 5687852, 6156028, 2429757, 9463701, 1587162, 6797428, 2162752, 2619417, 8303722, 1067717, 8784471, 7649706, 8381491, 9511959, 10541, 594350, 9429817, 6955031, 5099716, 8536363, 6391913, 2339090, 9327086, 2664799, 2684643, 5208557, 8070421, 6576122, 4031480, 1658408, 9180812, 7481733, 1227275, 6257460, 2311853, 3743742, 7860586, 5126869, 4952097, 9619192, 6983454, 993393, 3925005, 7183190, 2262298, 6446880, 4753650, 6230174, 1196881, 6322316, 8101155, 2021891, 2307611, 5349748, 6957523, 9070207, 7194233, 6035990, 455219, 5945482, 4728726, 7201727, 7944984, 2591944, 573296, 8223696, 4545176, 9283822, 4287250, 5168882, 1551198, 3510186, 6250436, 2360626, 6344919, 8198782, 2704460, 3165026, 9084460, 6870581, 2130285, 7618034, 2042258, 890973, 8605816, 2670808, 8881494, 9974782, 7258491, 9996085, 5543414, 1166590, 8123387, 9431262, 4230368, 466690, 4408673, 1075446, 2787676, 7987759, 6387405, 9617300, 8495348, 5653469, 3606329, 4835309, 8068857, 8483724, 8702419, 3787122, 7423873, 64049, 5562000, 5378887, 9490655, 8299686, 7134838, 5186054, 6946890, 8202742, 4178992, 3430577, 7856192, 3927090, 2537835, 2254096, 7076816, 998609, 84105, 1304093, 5731642, 8165187, 9836435, 5474723, 4847256, 6612568, 6413190, 9969156, 8438911, 6950476, 5092333, 8604487, 773198, 5565231, 5558626, 9858123, 3257171, 6769236, 1704999, 1307012, 7914933, 5674044, 5892164, 3700724, 9574345, 7215166, 5462189, 8604378, 3367736, 5950723, 6598398, 7976174, 1876393, 938719, 1019502, 469264, 7768892, 8115830, 4626503, 1692492, 7404266, 2085612, 5742197, 6977109, 466085, 3578031, 1448758, 5432477, 6718589, 785197, 5856116, 4341185, 1141983, 4418022, 9947892, 2240645, 3387414, 5014243, 9277262, 6925100, 4282123, 1047957, 2216909, 9707643, 1392903, 6550782, 8500847, 6720588, 1464768, 5454052, 4439490, 2898638, 7365008, 2561308, 7366544, 1785366, 4784893, 3795328, 7841396, 4570982, 1307385, 3280552, 3363982, 8754917, 9166380, 8986682, 958635, 5547355, 6328553, 5581083, 5992028, 9859876, 6912312, 4936056, 4139142, 4141766, 1535064, 2714663, 9122531, 9593907, 7123898, 78618, 852885, 1800031, 317237, 169928, 3532503, 4404973, 3355539, 1123872, 939200, 6081599, 2224657, 4965325, 5371813, 5018277, 8762949, 6481934, 1551961, 9024902, 4855824, 5399786, 8062876, 4132761, 3543551, 7548860, 6204872, 945715, 7028614, 7970761, 7348738, 6849069, 3571612, 75960, 4293176, 3122059, 3805660, 5542802, 5666763, 8475772, 1937952, 4465498, 4256290, 9743162, 5514455, 7229513, 3931386, 4705602, 3175412, 2343293, 2462827, 3431291, 3151715, 3502235, 1768567, 186860, 2692234, 5756856, 3922291, 2992828, 4449369, 1127246, 1079809, 1835760, 6102997, 9962090, 2414624, 1843369, 9164940, 4615788, 3159973, 498831, 3211811, 810187, 6263805, 4018860, 3915116, 4535718, 1392405, 1904031, 9865639, 1409965, 3949991, 5883283, 7959161, 7268879, 6476411, 2677034, 4868511, 2012848, 9898551, 4471773, 4415729, 3958726, 5988238, 4721697, 5667614, 284951, 3984167, 8648299, 2514661, 7527160, 791477, 307328, 3443498, 9262691, 7435202, 5166279, 6140093, 260919, 8687107, 7362819, 3982252, 5173675, 9309517, 9576134, 379997, 7241189, 2310521, 8344566, 9224693, 9295845, 5854458, 803958, 4330462, 8394023, 5803779, 871772, 583608, 6861628, 2993033, 7802818, 4234180, 4141562, 5770455, 7084865, 1204747, 8495926, 6643383, 3184531, 5077545, 6543027, 7773149, 5445095, 2284504, 1705591, 9419307, 6038305, 1497354, 366510, 3322799, 374586, 9151438, 6881911, 958322, 2809115, 8530692, 3647870, 3208809, 5682422, 7046255, 3971750, 4305217, 4880218, 4811050, 8050806, 9096405, 7509510, 3551823, 9739727, 9234540, 5661640, 7374842, 6865810, 8850077, 6768637, 7821543, 8894770, 7103076, 8030383, 2771235, 8855703, 6198095, 3754591, 4993436, 9125459, 7666066, 4802205, 3688548, 4804938, 8867375, 7851890, 4714584, 9814223, 669489, 8332308, 7700101, 6602078, 6484364, 2303514, 7068846, 2478602, 3425888, 6464153, 5310708, 7384407, 1471450, 7125318, 5525178, 5707706, 7678439, 3541286, 6597660, 8322585, 7268377, 1630879, 7273889, 3721800, 1281380, 4925315, 6039192, 4228632, 2180304, 2161003, 5888904, 9091032, 3922457, 4343768]
]

test_case_param = [
	[4, 6, 4],
	[100, 10, 1],
	[5, 5, 10],
	[10 ** 8 - 1, 10 ** 9 - 1, 1000]
]

num_test_case = 4

def themeParkNaive(param, queue):
	max_ride = param[0]
	max_ppl = param[1]
	queue_len = param[2]

	ride = 0
	ptr = 0
	money = 0
	cur_ride = 0
	cur_ride_first_group_ptr = -1

	print(param, queue)

	# while ride count is less than the max ride
	while ride < max_ride:
		# print(f'ptr [{ptr}] cur_ride_first_group_ptr[{cur_ride_first_group_ptr}]')

		# keep iterating to the next group until current group + cur_ride > max_ppl, stop adding more ppl and that formed a ride
		# when a ride is formed, increment ride by 1, add cur_ride to money and empty out the cart (cur_ride), go back to while statement 
		# if ppl is added to the cart, increment the ptr when current group + cur_ride < max_ppl

		# scan from the ptr, in a circular index manner, if increment to cur_ride
		if (cur_ride + queue[ptr] > max_ppl) or ptr == cur_ride_first_group_ptr:
			# print(f'empty cart cur_ride [{cur_ride}] max_ppl [{max_ppl}]')
			ride += 1
			money += cur_ride
			cur_ride = 0
			cur_ride_first_group_ptr = -1
			continue
		else:
			# print(f'Add [{queue[ptr]}] person at ptr [{ptr}]')

			cur_ride += queue[ptr]
			if cur_ride_first_group_ptr == -1:
				cur_ride_first_group_ptr = ptr

			# circular ptr increment
			ptr = (ptr + 1) % queue_len



	return money

def main():
	# num_test_case = int(input())
	
	# init list
	# test_case_param = []
	# test_case_queue = []

	# for i in range(num_test_case):
	# 	test_case_param.append([int(x) for x in input().split(' ')])
	# 	test_case_queue.append([int(x) for x in input().split(' ')])

	for i in range(num_test_case):
		pass
		print(f'Case #{i + 1}: {themeParkNaive(test_case_param[i], test_case_queue[i])}')


if __name__ == '__main__':
	main()